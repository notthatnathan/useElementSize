{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import { useLayoutEffect, useState } from 'react'\n\n/**\n * Returns current width and height of specified element.\n *\n * @param {Ref} ref element to use in size calculation\n */\nconst useElementSize = ref => {\n  // only runs in the browser\n  if (typeof window === 'undefined') return [0, 0];\n\n  const [size, setSize] = useState([0, 0])\n\n  const elObserver = new ResizeObserver(entries => {\n      if (entries?.[0]?.contentBoxSize?.[0]) {\n        setSize([entries[0].contentBoxSize[0].inlineSize, entries[0].contentBoxSize[0].blockSize])\n      } else if (entries?.contentBoxSize) {\n        setSize([entries[0].contentBoxSize.inlineSize, entries[0].contentBoxSize[0].blockSize])\n      } else {\n        setSize([entries[0].contentRect.width, entries[0].contentRect.height])\n      }\n  })\n\n  useLayoutEffect(() => {\n    if (!ref?.current) return\n\n    // set initial size\n    setSize([\n      ref?.current?.getBoundingClientRect().width * (window.visualViewport?.scale || 1) || 0,\n      ref?.current?.getBoundingClientRect().height * (window.visualViewport?.scale || 1) || 0,\n    ])\n\n    // watch for size changes\n    elObserver.observe(ref?.current)\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      if (!ref?.current) return\n\n      elObserver.unobserve(ref?.current)\n    }\n  }, [ref?.current])\n\n  return size\n}\n\nexport default useElementSize\n"],"names":["ref","window","useState","size","setSize","elObserver","ResizeObserver","entries","_entries$","contentBoxSize","_entries$$contentBoxS","inlineSize","blockSize","contentRect","width","height","useLayoutEffect","current","getBoundingClientRect","visualViewport","scale","observe","unobserve"],"mappings":"qEAOuB,SAAAA,GAErB,GAAsB,oBAAXC,OAAwB,MAAO,CAAC,EAAG,GAE9C,MAAwBC,EAAS,CAAC,EAAG,IAA9BC,OAAMC,OAEPC,EAAa,IAAIC,eAAe,SAAAC,WAC9BA,MAAAA,aAAAA,EAAU,2BAAVC,EAAcC,6BAAdC,EAA+B,GACjCN,EAAQ,CAACG,EAAQ,GAAGE,eAAe,GAAGE,WAAYJ,EAAQ,GAAGE,eAAe,GAAGG,YAE/ER,EADSG,MAAAA,GAAAA,EAASE,eACV,CAACF,EAAQ,GAAGE,eAAeE,WAAYJ,EAAQ,GAAGE,eAAe,GAAGG,WAEpE,CAACL,EAAQ,GAAGM,YAAYC,MAAOP,EAAQ,GAAGM,YAAYE,WAwBpE,OApBAC,EAAgB,uBACd,GAAKhB,MAAAA,GAAAA,EAAKiB,QAYV,OATAb,EAAQ,EACNJ,MAAAA,aAAAA,EAAKiB,8BAASC,wBAAwBJ,mBAASb,OAAOkB,qCAAgBC,QAAS,IAAM,GACrFpB,MAAAA,aAAAA,EAAKiB,8BAASC,wBAAwBH,oBAAUd,OAAOkB,qCAAgBC,QAAS,IAAM,IAIxFf,EAAWgB,QAAQrB,MAAAA,SAAAA,EAAKiB,oBAIjBjB,MAAAA,GAAAA,EAAKiB,SAEVZ,EAAWiB,UAAUtB,MAAAA,SAAAA,EAAKiB,WAE3B,CAACjB,MAAAA,SAAAA,EAAKiB,UAEFd"}
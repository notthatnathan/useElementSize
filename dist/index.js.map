{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\n\n/**\n * Returns current width of specified element.\n *\n * @param {Ref} ref element to use in width calculation\n */\nconst useElementWidth = ref => {\n  // handle ssr\n  if (typeof window === 'undefined') return 0;\n\n  const getWidth = useCallback(() => {\n    return ref?.current?.getBoundingClientRect().width * (window.visualViewport?.scale || 1) || 0\n  }, [ref?.current])\n  const [width, setWidth] = useState(0)\n\n  const elObserver = new ResizeObserver(entries => {\n    window.requestAnimationFrame(() => {\n      if (!ref?.current) return\n\n      if (entries?.[0]?.contentBoxSize?.[0]) {\n        setWidth(entries[0].contentBoxSize[0].inlineSize)\n      } else if (entries?.contentBoxSize) {\n        setWidth(entries[0].contentBoxSize.inlineSize)\n      } else {\n        setWidth(entries[0].contentRect.width)\n      }\n    })\n  })\n\n  useEffect(() => {\n    setWidth(getWidth())\n  }, [ref?.current])\n\n  useEffect(() => {\n    if (!ref?.current) return\n\n    elObserver.observe(ref?.current)\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      if (!ref?.current) return\n      elObserver.unobserve(ref?.current)\n    }\n  })\n\n  return width\n}\n\nexport default useElementWidth\n"],"names":["ref","window","getWidth","useCallback","current","getBoundingClientRect","width","visualViewport","scale","useState","setWidth","elObserver","ResizeObserver","entries","requestAnimationFrame","_entries$","contentBoxSize","_entries$$contentBoxS","inlineSize","contentRect","useEffect","observe","unobserve"],"mappings":"sCAOwB,SAAAA,GAEtB,GAAsB,oBAAXC,OAAwB,SAEnC,IAAMC,EAAWC,cAAY,mBAC3B,OAAOH,MAAAA,aAAAA,EAAKI,8BAASC,wBAAwBC,mBAASL,OAAOM,qCAAgBC,QAAS,IAAM,GAC3F,CAACR,MAAAA,SAAAA,EAAKI,YACiBK,WAAS,GAA5BH,OAAOI,OAERC,EAAa,IAAIC,eAAe,SAAAC,GACpCZ,OAAOa,sBAAsB,mBACtBd,MAAAA,GAAAA,EAAKI,UAENS,MAAAA,aAAAA,EAAU,2BAAVE,EAAcC,6BAAdC,EAA+B,GACjCP,EAASG,EAAQ,GAAGG,eAAe,GAAGE,YAEtCR,EADSG,MAAAA,GAAAA,EAASG,eACTH,EAAQ,GAAGG,eAAeE,WAE1BL,EAAQ,GAAGM,YAAYb,YAqBtC,OAhBAc,YAAU,WACRV,EAASR,MACR,CAACF,MAAAA,SAAAA,EAAKI,UAETgB,YAAU,WACR,GAAKpB,MAAAA,GAAAA,EAAKI,QAKV,OAHAO,EAAWU,QAAQrB,MAAAA,SAAAA,EAAKI,oBAIjBJ,MAAAA,GAAAA,EAAKI,SACVO,EAAWW,UAAUtB,MAAAA,SAAAA,EAAKI,YAIvBE"}
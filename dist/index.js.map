{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { useEffect, useState } from 'react'\n\n/**\n * Returns current width and height of specified element.\n *\n * @param {Ref} ref element to use in size calculation\n */\nconst useElementSize = ref => {\n  // handle ssr\n  if (typeof window === 'undefined') return 0;\n\n  const [size, setSize] = useState([0, 0])\n\n    // set initial size\n    useEffect(() => {\n      if (!ref?.current) return\n\n      setSize([\n        ref?.current?.getBoundingClientRect().width * (window.visualViewport?.scale || 1) || 0,\n        ref?.current?.getBoundingClientRect().height * (window.visualViewport?.scale || 1) || 0,\n      ])\n    }, [ref?.current])\n\n  // watch for size changes\n  const elObserver = new ResizeObserver(entries => {\n    window.requestAnimationFrame(() => {\n      if (!ref?.current) return\n\n      if (entries?.[0]?.contentBoxSize?.[0]) {\n        setSize([entries[0].contentBoxSize[0].inlineSize, entries[0].contentBoxSize[0].blockSize])\n      } else if (entries?.contentBoxSize) {\n        setSize([entries[0].contentBoxSize.inlineSize, entries[0].contentBoxSize[0].blockSize])\n      } else {\n        setSize([entries[0].contentRect.width, entries[0].contentRect.height])\n      }\n    })\n  })\n\n  useEffect(() => {\n    if (!ref?.current) return\n\n    elObserver.observe(ref?.current)\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      if (!ref?.current) return\n\n      elObserver.unobserve(ref?.current)\n    }\n  })\n\n  return size\n}\n\nexport default useElementSize\n"],"names":["ref","window","useState","size","setSize","useEffect","current","getBoundingClientRect","width","visualViewport","scale","height","elObserver","ResizeObserver","entries","requestAnimationFrame","_entries$","contentBoxSize","_entries$$contentBoxS","inlineSize","blockSize","contentRect","observe","unobserve"],"mappings":"sCAOuB,SAAAA,GAErB,GAAsB,oBAAXC,OAAwB,SAEnC,MAAwBC,WAAS,CAAC,EAAG,IAA9BC,OAAMC,OAGXC,YAAU,uBACHL,MAAAA,GAAAA,EAAKM,SAEVF,EAAQ,EACNJ,MAAAA,aAAAA,EAAKM,8BAASC,wBAAwBC,mBAASP,OAAOQ,qCAAgBC,QAAS,IAAM,GACrFV,MAAAA,aAAAA,EAAKM,8BAASC,wBAAwBI,oBAAUV,OAAOQ,qCAAgBC,QAAS,IAAM,KAEvF,CAACV,MAAAA,SAAAA,EAAKM,UAGX,IAAMM,EAAa,IAAIC,eAAe,SAAAC,GACpCb,OAAOc,sBAAsB,mBACtBf,MAAAA,GAAAA,EAAKM,UAENQ,MAAAA,aAAAA,EAAU,2BAAVE,EAAcC,6BAAdC,EAA+B,GACjCd,EAAQ,CAACU,EAAQ,GAAGG,eAAe,GAAGE,WAAYL,EAAQ,GAAGG,eAAe,GAAGG,YAE/EhB,EADSU,MAAAA,GAAAA,EAASG,eACV,CAACH,EAAQ,GAAGG,eAAeE,WAAYL,EAAQ,GAAGG,eAAe,GAAGG,WAEpE,CAACN,EAAQ,GAAGO,YAAYb,MAAOM,EAAQ,GAAGO,YAAYV,cAkBpE,OAbAN,YAAU,WACR,GAAKL,MAAAA,GAAAA,EAAKM,QAKV,OAHAM,EAAWU,QAAQtB,MAAAA,SAAAA,EAAKM,oBAIjBN,MAAAA,GAAAA,EAAKM,SAEVM,EAAWW,UAAUvB,MAAAA,SAAAA,EAAKM,YAIvBH"}